# serenity.conf

serenity {
  project.name = "T2 Serenity Project"
  outputDirectory = "target/site/serenity"
  take.screenshots = AFTER_EACH_STEP
}

webdriver {
  driver = "chrome"
  wait.for.timeout = 15000
  remote.url = "http://localhost:4444/wd/hub"

  capabilities {
    "goog:chromeOptions" {
      args = [
        "--headless=new",                # modo headless para GitHub Actions
        "--disable-gpu",
        "--no-sandbox",
        "--disable-dev-shm-usage",
        "--disable-save-password-bubble",
        "--disable-password-manager-reauthentication",
        "--disable-features=PasswordLeakDetection,PasswordCheck,PasswordManagerOnboarding",
        "--disable-component-update",
        "--no-first-run",
        "--disable-default-apps",
        "--disable-popup-blocking",
        "--disable-infobars",
        "--disable-notifications",
        "--incognito",
        "--window-size=1920,1080",
        "--remote-allow-origins=*"
      ]
      excludeSwitches = ["enable-automation"]
      prefs {
        credentials_enable_service = false
        "profile.password_manager_enabled" = false
        "profile.password_manager_leak_detection" = false
        "autofill.profile_enabled" = false
        "autofill.credit_card_enabled" = false
      }
    }
  }
}
